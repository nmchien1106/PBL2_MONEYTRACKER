# HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng Chá»©c NÄƒng Quáº£n LÃ½ Vay Ná»£

## ğŸ“‹ Tá»•ng Quan

Chá»©c nÄƒng quáº£n lÃ½ vay ná»£ cho phÃ©p báº¡n theo dÃµi cÃ¡c khoáº£n vay vÃ  cho vay má»™t cÃ¡ch chi tiáº¿t, bao gá»“m:
- Khoáº£n vay ná»£ (borrow): Sá»‘ tiá»n báº¡n Ä‘i vay tá»« ngÆ°á»i khÃ¡c
- Khoáº£n cho vay (lend): Sá»‘ tiá»n báº¡n cho ngÆ°á»i khÃ¡c vay
- Tráº¡ng thÃ¡i thanh toÃ¡n cá»§a tá»«ng khoáº£n
- NgÃ y Ä‘Ã¡o háº¡n vÃ  ngÆ°á»i liÃªn quan

## ğŸ¨ Giao Diá»‡n

### 1. Báº£ng Tá»•ng Quan
Hiá»ƒn thá»‹ 3 chá»‰ sá»‘ quan trá»ng:
- **Tá»•ng vay ná»£**: Tá»•ng sá»‘ tiá»n báº¡n Ä‘ang vay (mÃ u vÃ ng cam #ffc107)
- **Tá»•ng cho vay**: Tá»•ng sá»‘ tiá»n báº¡n Ä‘Ã£ cho vay (mÃ u xanh lÃ¡ #28a745)
- **ChÆ°a thanh toÃ¡n**: Tá»•ng sá»‘ tiá»n chÆ°a Ä‘Æ°á»£c thanh toÃ¡n (mÃ u Ä‘á» #dc3545)

### 2. Thanh CÃ´ng Cá»¥
- **NÃºt ThÃªm**: ThÃªm khoáº£n ná»£ má»›i (Ä‘ang phÃ¡t triá»ƒn)
- **Ã” tÃ¬m kiáº¿m**: TÃ¬m kiáº¿m theo mÃ´ táº£, tÃªn ngÆ°á»i, loáº¡i ná»£
- **NÃºt TÃ¬m kiáº¿m**: Thá»±c hiá»‡n tÃ¬m kiáº¿m
- **NÃºt XÃ³a**: XÃ³a káº¿t quáº£ tÃ¬m kiáº¿m vÃ  reset filter
- **ComboBox Lá»c**: Lá»c theo:
  - Táº¥t cáº£
  - Vay ná»£
  - Cho vay
  - ChÆ°a thanh toÃ¡n
  - ÄÃ£ thanh toÃ¡n

### 3. Danh SÃ¡ch Khoáº£n Ná»£
Hiá»ƒn thá»‹ cÃ¡c card vá»›i thÃ´ng tin:
- Sá»‘ tiá»n (+/- tÃ¹y loáº¡i)
- Badge loáº¡i (VAY Ná»¢ / CHO VAY)
- TÃªn ngÆ°á»i vay/cho vay
- NgÃ y Ä‘Ã¡o háº¡n
- Tráº¡ng thÃ¡i thanh toÃ¡n
- MÃ´ táº£
- CÃ¡c nÃºt hÃ nh Ä‘á»™ng

## ğŸ¯ CÃ¡c TÃ­nh NÄƒng ChÃ­nh

### 1. Hiá»ƒn Thá»‹ Card Khoáº£n Ná»£
Má»—i card hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ thÃ´ng tin:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ -5,000,000 VNÄ         [VAY Ná»¢]    â”‚
â”‚ NgÆ°á»i cho vay: Nguyá»…n VÄƒn A         â”‚
â”‚ ÄÃ¡o háº¡n: 31/12/2025  â³ ChÆ°a t.toÃ¡nâ”‚
â”‚ Vay tiá»n mua laptop                 â”‚
â”‚ [ÄÃ¡nh dáº¥u Ä‘Ã£ tráº£] [Sá»­a] [XÃ³a]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. MÃ u Sáº¯c PhÃ¢n Biá»‡t
- **Vay ná»£ (borrow)**: MÃ u vÃ ng cam (#ffc107) - cáº£nh bÃ¡o
- **Cho vay (lend)**: MÃ u xanh lÃ¡ (#28a745) - tÃ­ch cá»±c

### 3. ÄÃ¡nh Dáº¥u Thanh ToÃ¡n
- Click nÃºt "ÄÃ¡nh dáº¥u Ä‘Ã£ tráº£" Ä‘á»ƒ chuyá»ƒn Ä‘á»•i tráº¡ng thÃ¡i
- Náº¿u chÆ°a thanh toÃ¡n â†’ ÄÃ¡nh dáº¥u Ä‘Ã£ tráº£
- Náº¿u Ä‘Ã£ thanh toÃ¡n â†’ ÄÃ¡nh dáº¥u chÆ°a tráº£
- Icon thay Ä‘á»•i: â³ (chÆ°a) â†” âœ“ (Ä‘Ã£)

### 4. XÃ³a Khoáº£n Ná»£
- Click nÃºt "XÃ³a" trÃªn card
- Há»™p thoáº¡i xÃ¡c nháº­n xuáº¥t hiá»‡n
- Chá»n "Yes" Ä‘á»ƒ xÃ³a vÄ©nh viá»…n

### 5. TÃ¬m Kiáº¿m
TÃ¬m kiáº¿m theo:
- MÃ´ táº£ (description)
- TÃªn ngÆ°á»i vay/cho vay (debtorName)
- Loáº¡i ná»£ (debtType)
- Sá»‘ tiá»n (amount)

TÃ¬m kiáº¿m real-time khi gÃµ vÃ o Ã´ tÃ¬m kiáº¿m.

### 6. Lá»c Dá»¯ Liá»‡u
Sá»­ dá»¥ng ComboBox Ä‘á»ƒ lá»c:
- **Táº¥t cáº£**: Hiá»ƒn thá»‹ táº¥t cáº£ khoáº£n ná»£
- **Vay ná»£**: Chá»‰ hiá»ƒn thá»‹ khoáº£n báº¡n Ä‘i vay
- **Cho vay**: Chá»‰ hiá»ƒn thá»‹ khoáº£n báº¡n cho vay
- **ChÆ°a thanh toÃ¡n**: Khoáº£n chÆ°a Ä‘Æ°á»£c thanh toÃ¡n
- **ÄÃ£ thanh toÃ¡n**: Khoáº£n Ä‘Ã£ thanh toÃ¡n xong

## ğŸ’¾ Cáº¥u TrÃºc Dá»¯ Liá»‡u

### File CSV: `data/deptData.csv`
```csv
id,category,createdAt,updatedAt,amount,description,debtorName,dueDate,isPaid,debtType
DT0001,CAT0001,20/12/2025 10:00,20/12/2025,5000000,Vay tiá»n mua laptop,Nguyá»…n VÄƒn A,31/12/2025,0,borrow
```

### CÃ¡c TrÆ°á»ng Dá»¯ Liá»‡u:
- **id**: ID duy nháº¥t (DT0001, DT0002...)
- **category**: ID danh má»¥c
- **createdAt**: NgÃ y táº¡o (dd/MM/yyyy HH:mm)
- **updatedAt**: NgÃ y cáº­p nháº­t (dd/MM/yyyy)
- **amount**: Sá»‘ tiá»n
- **description**: MÃ´ táº£
- **debtorName**: TÃªn ngÆ°á»i vay/cho vay
- **dueDate**: NgÃ y Ä‘Ã¡o háº¡n (dd/MM/yyyy)
- **isPaid**: Tráº¡ng thÃ¡i (0=chÆ°a, 1=Ä‘Ã£)
- **debtType**: Loáº¡i (borrow/lend)

## ğŸ”§ CÃ¡c Class vÃ  Methods

### Debt Class (`debt.h`, `debt.cpp`)

**Thuá»™c tÃ­nh riÃªng:**
```cpp
QString debtorName;      // TÃªn ngÆ°á»i ná»£/cho vay
QDate dueDate;          // NgÃ y Ä‘Ã¡o háº¡n
bool isPaid;            // Tráº¡ng thÃ¡i thanh toÃ¡n
QString debtType;       // "borrow" hoáº·c "lend"
```

**Methods chÃ­nh:**
```cpp
// Getters/Setters
QString getDebtorName() const;
QDate getDueDate() const;
bool getIsPaid() const;
QString getDebtType() const;
void setIsPaid(bool paid);

// Override tá»« Transaction
QString getType() const override;
QString getColorCode() const override;
QFrame* createCard(const QString& index) const override;

// Static methods tÃ­nh toÃ¡n
static double calculateMonthlyTotal(const QVector<Debt>&, int year, int month, const QString& type);
static double getTotalBorrowed(const QVector<Debt>&);
static double getTotalLent(const QVector<Debt>&);
static double getTotalUnpaid(const QVector<Debt>&, const QString& type);
```

### App Class Methods

**Quáº£n lÃ½ dá»¯ liá»‡u:**
```cpp
static void addDebt(const QString& categoryId, double amount,
                   const QString& description, const QString& debtorName,
                   const QDate& dueDate, const QString& debtType);
static QString generateNextDebtId();
static bool removeDebtById(const QString& debtId);
static bool markDebtAsPaid(const QString& debtId, bool isPaid);
static const QVector<Debt>& getDebtList();
```

### Dashboard Methods

**Hiá»ƒn thá»‹ vÃ  tÆ°Æ¡ng tÃ¡c:**
```cpp
void renderDebtCards();
void renderDebtCards(const QVector<Debt>& debts);
void updateDebtOverview();
void searchDebt(const QString& keyword);
void clearDebtSearch();
void handleDebtCardAction();
void editDebtTransaction(const QString& debtId);
void removeDebtTransaction(const QString& debtId);
void markDebtAsPaid(const QString& debtId);
void onDebtFilterChanged(int index);
```

## ğŸ¨ Widget Names trong UI

### Labels tá»•ng quan:
- `totalBorrowedLabel`: Tá»•ng vay ná»£
- `totalLentLabel`: Tá»•ng cho vay
- `totalUnpaidLabel`: Tá»•ng chÆ°a thanh toÃ¡n

### Inputs vÃ  buttons:
- `addDebtButton`: NÃºt thÃªm khoáº£n ná»£
- `debtSearchInput`: Ã” tÃ¬m kiáº¿m
- `debtSearchButton`: NÃºt tÃ¬m kiáº¿m
- `debtClearButton`: NÃºt xÃ³a
- `debtFilterCombo`: ComboBox lá»c

### Containers:
- `debtList`: QScrollArea chá»©a danh sÃ¡ch
- `debtListContent`: QWidget ná»™i dung scroll area

## ğŸ“ VÃ­ Dá»¥ Sá»­ Dá»¥ng

### 1. ThÃªm khoáº£n vay ná»£ má»›i (Code)
```cpp
App::addDebt("CAT0001", 5000000.0, "Vay tiá»n mua laptop",
             "Nguyá»…n VÄƒn A", QDate(2025, 12, 31), "borrow");
```

### 2. ThÃªm khoáº£n cho vay (Code)
```cpp
App::addDebt("CAT0002", 3000000.0, "Cho báº¡n vay",
             "Tráº§n Thá»‹ B", QDate(2026, 1, 15), "lend");
```

### 3. ÄÃ¡nh dáº¥u Ä‘Ã£ thanh toÃ¡n
```cpp
App::markDebtAsPaid("DT0001", true);
```

### 4. Láº¥y tá»•ng vay ná»£
```cpp
double totalBorrowed = Debt::getTotalBorrowed(App::getDebtList());
```

### 5. Lá»c khoáº£n chÆ°a thanh toÃ¡n
```cpp
QVector<Debt> unpaid;
for (const Debt& debt : App::getDebtList()) {
    if (!debt.getIsPaid()) {
        unpaid.append(debt);
    }
}
```

## âœ… Testing

Dá»¯ liá»‡u máº«u Ä‘Ã£ Ä‘Æ°á»£c táº¡o trong `data/deptData.csv`:
- 2 khoáº£n vay ná»£ (borrow)
- 2 khoáº£n cho vay (lend)
- 2 khoáº£n Ä‘Ã£ thanh toÃ¡n
- 3 khoáº£n chÆ°a thanh toÃ¡n

CÃ¡c ngÃ y Ä‘Ã¡o háº¡n khÃ¡c nhau Ä‘á»ƒ test sáº¯p xáº¿p vÃ  hiá»ƒn thá»‹.

## ğŸš€ PhÃ¡t Triá»ƒn Tiáº¿p

CÃ¡c tÃ­nh nÄƒng cÃ³ thá»ƒ thÃªm:
1. âœ… Dialog thÃªm/sá»­a khoáº£n ná»£
2. âœ… Sáº¯p xáº¿p theo ngÃ y Ä‘Ã¡o háº¡n, sá»‘ tiá»n
3. âœ… ThÃ´ng bÃ¡o khoáº£n ná»£ sáº¯p Ä‘Ã¡o háº¡n
4. âœ… Export/Import CSV
5. âœ… Biá»ƒu Ä‘á»“ phÃ¢n tÃ­ch ná»£ theo thá»i gian
6. âœ… Lá»‹ch sá»­ thanh toÃ¡n tá»«ng pháº§n
7. âœ… Gá»­i nháº¯c nhá»Ÿ qua email

## ğŸ¯ Káº¿t Luáº­n

Chá»©c nÄƒng quáº£n lÃ½ vay ná»£ Ä‘Ã£ Ä‘Æ°á»£c tÃ­ch há»£p hoÃ n chá»‰nh vá»›i:
- âœ… UI Ä‘áº§y Ä‘á»§ vÃ  trá»±c quan
- âœ… Táº¥t cáº£ thuá»™c tÃ­nh vÃ  methods cá»§a lá»›p Debt
- âœ… TÃ¬m kiáº¿m vÃ  lá»c máº¡nh máº½
- âœ… MÃ u sáº¯c phÃ¢n biá»‡t rÃµ rÃ ng
- âœ… TÆ°Æ¡ng tÃ¡c user-friendly
- âœ… TÃ­ch há»£p hoÃ n háº£o vá»›i kiáº¿n trÃºc hiá»‡n táº¡i

Build thÃ nh cÃ´ng vÃ  sáºµn sÃ ng sá»­ dá»¥ng! ğŸ‰
